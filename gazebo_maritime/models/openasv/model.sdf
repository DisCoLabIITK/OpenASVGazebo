<?xml version="1.0"?>

<sdf version='1.6'>
<!-- Basic model of the OpenASV -->
<model name="openasv">
  <static>false</static>
  <link name="base_link">
    <enable_wind>true</enable_wind>
    <inertial>
      <mass>10.5</mass>
      <inertia>
        <ixx>1.0</ixx>
        <ixy>0.0</ixy>
        <ixz>0.0</ixz>
        <iyy>3</iyy>
        <iyz>0.0</iyz>
        <izz>4.0</izz>
      </inertia>
    </inertial>

    <visual name="base_visual">
      <geometry>
        <mesh><uri>meshes/openasv_base.dae</uri></mesh>
      </geometry>
    </visual>

    <!-- Top base -->
    <collision name="top_base">
      <pose>0 0 0.3 0 0 0</pose>
      <geometry>
        <box><size>0.4 0.25 0.16" </size></box>
      </geometry>
    </collision>

    <!-- left base -->
    <collision name="left_float">
      <pose>-0 0.28 -0.0 0 1.57 0 </pose>
      <geometry>
        <cylinder><length>1.24</length><radius>0.1</radius></cylinder>
      </geometry>
    </collision>
    <!--collision name="left_mid_float">
      <pose>1.85 1.03 0.3 0 1.38 0</pose>
      <geometry>
        <cylinder><length>0.5</length><radius>0.17</radius></cylinder>
      </geometry>
    </collision>
    <collision name="left_front_float">
      <pose>2.3 1.03 0.4 0 1.3 0</pose>
      <geometry>
        <cylinder><length>0.45</length><radius>0.12</radius></cylinder>
      </geometry>
    </collision-->

    <!-- right base -->
    <collision name="right_float">
      <pose>-0.0 -0.28 -0.0 0 1.57 0 </pose>
      <geometry>
        <cylinder><length>1.24</length><radius>0.1</radius></cylinder>
      </geometry>
    </collision>
    <!--collision name="right_mid_float">
      <pose>1.85 -1.03 0.3 0 1.38 0</pose>
      <geometry>
        <cylinder><length>0.5</length><radius>0.17</radius></cylinder>
      </geometry>
    </collision>
    <collision name="right_front_float">
      <pose>2.3 -1.03 0.4 0 1.3 0</pose>
      <geometry>
        <cylinder><length>0.45</length><radius>0.12</radius></cylinder>
      </geometry>
    </collision-->
  </link>

  <!-- left engine and thruster -->
  <!--
  <link name="left_engine_link">
    <pose>-2.373776 1.027135 0.318237 0 0 0</pose>
    <visual name ="left_engine_visual">
      <geometry>
        <mesh><uri>meshes/engine.dae</uri></mesh>
      </geometry>
    </visual>
    <collision name="left_engine_vertical_axis_collision">
      <pose>-0.16 0 -0.24 0 0 0</pose>
      <geometry>
        <box><size>0.2 0.15 0.83</size></box>
      </geometry>
    </collision>
    <collision name="left_engine_rear_end_collision">
      <pose>-0.34 0 0.12 0 0 0</pose>
      <geometry>
        <box><size>0.12 0.15 0.12</size></box>
      </geometry>
    </collision>
    <inertial>
      <mass>15.0</mass>
      <inertia>
        <ixx>0.889245</ixx>
        <ixy>0.0</ixy>
        <ixz>0.0</ixz>
        <iyy>0.811125</iyy>
        <iyz>0.0</iyz>
        <izz>0.078125</izz>
      </inertia>
    </inertial>
  </link>
  -->
  <link name="left_propeller_link">
    <pose>-0.3 0.275 -0.144 0 0 0</pose>
    <visual name ="left_propeller_visual">
      <geometry>
        <mesh><uri>meshes/propeller.dae</uri></mesh>
      </geometry>
    </visual>
    <collision name="left_propeller_collision">
      <pose>-0.0 0 0 0 1.57 0</pose>
      <geometry>
        <cylinder><length>0.10</length><radius>0.07</radius></cylinder>
      </geometry>
    </collision>
    <inertial>
      <mass>0.5</mass>
      <inertia>
        <ixx>0.0000044</ixx>
        <ixy>0.0</ixy>
        <ixz>0.0</ixz>
        <iyy>0.0000035</iyy>
        <iyz>0.0</iyz>
        <izz>0.0000018</izz>
      </inertia>
    </inertial>
  </link>
<!--
  <joint name="left_chasis_engine_joint" type="revolute">
    <axis>
      <xyz>0 0 1</xyz>
      <limit>
        <lower>-1.57079</lower>
        <upper>1.57079</upper>
        <effort>10</effort>
        <velocity>10</velocity>
      </limit>
    </axis>
    <parent>base_link</parent>
    <child>left_engine_link</child>
  </joint>
-->
  <joint name="left_engine_propeller_joint" type="revolute">
    <axis>
      <xyz>1 0 0</xyz>
      <limit>
        <effort>100</effort>
        <velocity>100</velocity>
      </limit>
      <dynamics>
        <friction>0.05</friction>
        <damping>0.05</damping>
      </dynamics>
    </axis>
    <parent>base_link</parent>
    <child>left_propeller_link</child>
  </joint>

  <!-- right engine and thruster -->
    <!--
  <link name="right_engine_link">
    <pose>-2.373776 -1.027135 0.318237 0 0 0</pose>
    <visual name ="right_engine_visual">
      <geometry>
        <mesh><uri>meshes/engine.dae</uri></mesh>
      </geometry>
    </visual>
    <collision name="right_engine_vertical_axis_collision">
      <pose>-0.16 0 -0.24 0 0 0</pose>
      <geometry>
        <box><size>0.2 0.15 0.83</size></box>
      </geometry>
    </collision>
    <collision name="right_engine_rear_end_collision">
      <pose>-0.34 0 0.12 0 0 0</pose>
      <geometry>
        <box><size>0.12 0.15 0.12</size></box>
      </geometry>
    </collision>
    <inertial>
      <mass>15.0</mass>
      <inertia>
        <ixx>0.889245</ixx>
        <ixy>0.0</ixy>
        <ixz>0.0</ixz>
        <iyy>0.811125</iyy>
        <iyz>0.0</iyz>
        <izz>0.078125</izz>
      </inertia>
    </inertial>
  </link>
  -->
  <link name="right_propeller_link">
    <pose>-0.3 -0.275 -0.144 0 0 0</pose>
    <visual name ="right_propeller_visual">
      <geometry>
        <mesh><uri>meshes/propeller.dae</uri></mesh>
      </geometry>
    </visual>
    <collision name="right_propeller_collision">
      <pose>-0.0 0 0 0 1.57 0</pose>
      <geometry>
        <cylinder><length>0.10</length><radius>0.07</radius></cylinder>
      </geometry>
    </collision>
    <inertial>
      <mass>0.011</mass>
      <inertia>
        <ixx>0.0000044</ixx>
        <ixy>0.0</ixy>
        <ixz>0.0</ixz>
        <iyy>0.0000035</iyy>
        <iyz>0.0</iyz>
        <izz>0.0000018</izz>
      </inertia>
    </inertial>
  </link>
  <!--
  <joint name="right_chasis_engine_joint" type="revolute">
    <axis>
      <xyz>0 0 1</xyz>
      <limit>
        <lower>-1.57079</lower>
        <upper>1.57079</upper>
        <effort>10</effort>
        <velocity>10</velocity>
      </limit>
    </axis>
    <parent>base_link</parent>
    <child>right_engine_link</child>
  </joint>
-->
  <joint name="right_engine_propeller_joint" type="revolute">
    <axis>
      <xyz>1 0 0</xyz>
      <limit>
        <effort>100</effort>
        <velocity>100</velocity>
      </limit>
      <dynamics>
        <friction>0.05</friction>
        <damping>0.05</damping>
      </dynamics>
    </axis>
    <parent>base_link</parent>
    <child>right_propeller_link</child>
  </joint>

  <!-- Uncomment to enable the left thruster -->
    <plugin
      filename="gz-sim-thruster-system"
      name="gz::sim::systems::Thruster">
      <joint_name>left_engine_propeller_joint</joint_name>
      <thrust_coefficient>0.0001</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.1</propeller_diameter>
      <velocity_control>true</velocity_control>
    </plugin>
 <!-- 
  <plugin
    filename="gz-sim-joint-position-controller-system"
    name="gz::sim::systems::JointPositionController">
    <joint_name>left_chasis_engine_joint</joint_name>
    <use_velocity_commands>true</use_velocity_commands>
    <topic>/wamv/left/thruster/joint/cmd_pos</topic>
  </plugin> -->

  <!-- Uncomment to enable the right thruster -->
    <plugin
      filename="gz-sim-thruster-system"
      name="gz::sim::systems::Thruster">
      <joint_name>right_engine_propeller_joint</joint_name>
      <thrust_coefficient>0.0001</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.1</propeller_diameter>
      <velocity_control>true</velocity_control>
    </plugin>
<!--
  <plugin
    filename="gz-sim-joint-position-controller-system"
    name="gz::sim::systems::JointPositionController">
    <joint_name>right_chasis_engine_joint</joint_name>
    <use_velocity_commands>true</use_velocity_commands>
    <topic>/wamv/right/thruster/joint/cmd_pos</topic>
  </plugin> -->

  <!-- Uncomment to produce buoyancy on the left hull -->
  <plugin
    filename="libSurface.so"
    name="maritime::Surface">
    <link_name>base_link</link_name>
    <hull_length>1.24</hull_length>
    <hull_radius>0.08</hull_radius>
    <fluid_level>0.1</fluid_level>
    <points>
      <point>0.42 0.28 0</point>
      <point>-0.42 0.28 0</point>
    </points>
    <wavefield>
      <topic>/gazebo/wavefield/parameters</topic>
    </wavefield>
  </plugin>

  <!-- Uncomment to produce buoyancy on the right hull -->
  <plugin
    filename="libSurface.so"
    name="maritime::Surface">
    <link_name>base_link</link_name>
    <hull_length>1.24</hull_length>
    <hull_radius>0.08</hull_radius>
    <fluid_level>0.1</fluid_level>
    <points>
      <point>0.42 -0.28 0</point>
      <point>-0.42 -0.28 0</point>
    </points>
    <wavefield>
      <topic>/gazebo/wavefield/parameters</topic>
    </wavefield>
  </plugin>

  <!-- Uncomment to enable hydrodynamics -->
  <!--plugin
    filename="gz-sim-hydrodynamics-system"
    name="gz::sim::systems::Hydrodynamics">
    <link_name>base_link</link_name>
    <xDotU>0.0</xDotU>
    <yDotV>0.0</yDotV>
    <nDotR>0.0</nDotR>
    <xU>-51.3</xU>
    <xAbsU>-72.4</xAbsU>
    <yV>-40.0</yV>
    <yAbsV>0.0</yAbsV>
    <zW>-500.0</zW>
    <kP>-50.0</kP>
    <mQ>-50.0</mQ>
    <nR>-400.0</nR>
    <nAbsR>0.0</nAbsR>
  </plugin--> 
  <plugin
    filename="gz-sim-hydrodynamics-system"
    name="gz::sim::systems::Hydrodynamics">
    <link_name>base_link</link_name>
    <xDotU>0.0</xDotU>
    <yDotV>0.0</yDotV>
    <nDotR>0.0</nDotR>
    <xU>-51.3</xU>
    <xAbsU>-72.4</xAbsU>
    <yV>-40.0</yV>
    <yAbsV>0.0</yAbsV>
    <zW>-50.0</zW>
    <kP>-50.0</kP>
    <mQ>-50.0</mQ>
    <nR>-40.0</nR>
    <nAbsR>0.0</nAbsR>
  </plugin> 

</model>

</sdf>
